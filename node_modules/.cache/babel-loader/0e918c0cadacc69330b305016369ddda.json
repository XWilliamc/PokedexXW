{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\TANIA\\\\Desktop\\\\Agromprenx para iniciar poked\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"C:\\\\Users\\\\TANIA\\\\Desktop\\\\Agromprenx para iniciar poked\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\TANIA\\\\Desktop\\\\Agromprenx para iniciar poked\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\TANIA\\\\Desktop\\\\Agromprenx para iniciar poked\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\TANIA\\\\Desktop\\\\Agromprenx para iniciar poked\\\\src\\\\App.js\";\nimport React from \"react\";\nimport \"./styles.css\";\nimport Navbar from \"../components/Navbar\";\nimport Searchbar from \"../components/Searchbar\";\nimport Pokedex from \"../components/Pokedex\";\nimport { FavoriteProvider } from \"../contexts/favoritesContext\";\nimport Footer from \"../components/Footer\";\nimport { getPokemonData, getPokemons, searchPokemon } from \"../api\";\nvar useState = React.useState,\n    useEffect = React.useEffect;\nvar localStorageKey = \"favorite_pokemon\";\nexport default function App() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      pokemons = _useState2[0],\n      setPokemons = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      page = _useState4[0],\n      setPage = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      total = _useState6[0],\n      setTotal = _useState6[1];\n\n  var _useState7 = useState(true),\n      _useState8 = _slicedToArray(_useState7, 2),\n      loading = _useState8[0],\n      setLoading = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      favorites = _useState10[0],\n      setFavorites = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      notFound = _useState12[0],\n      setNotFound = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      searching = _useState14[0],\n      setSearching = _useState14[1];\n\n  var fetchPokemons = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var data, promises, results;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              setLoading(true);\n              _context2.next = 4;\n              return getPokemons(25, 25 * page);\n\n            case 4:\n              data = _context2.sent;\n              promises = data.results.map( /*#__PURE__*/function () {\n                var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(pokemon) {\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          _context.next = 2;\n                          return getPokemonData(pokemon.url);\n\n                        case 2:\n                          return _context.abrupt(\"return\", _context.sent);\n\n                        case 3:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }));\n\n                return function (_x) {\n                  return _ref2.apply(this, arguments);\n                };\n              }());\n              _context2.next = 8;\n              return Promise.all(promises);\n\n            case 8:\n              results = _context2.sent;\n              setPokemons(results);\n              setLoading(false);\n              setTotal(Math.ceil(data.count / 25));\n              setNotFound(false);\n              _context2.next = 17;\n              break;\n\n            case 15:\n              _context2.prev = 15;\n              _context2.t0 = _context2[\"catch\"](0);\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 15]]);\n    }));\n\n    return function fetchPokemons() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var loadFavoritePokemons = function loadFavoritePokemons() {\n    var pokemons = JSON.parse(window.localStorage.getItem(localStorageKey)) || [];\n    setFavorites(pokemons);\n  };\n\n  useEffect(function () {\n    loadFavoritePokemons();\n  }, []);\n  useEffect(function () {\n    if (!searching) {\n      fetchPokemons();\n    }\n  }, [page]);\n\n  var updateFavoritePokemons = function updateFavoritePokemons(name) {\n    var updated = _toConsumableArray(favorites);\n\n    var isFavorite = updated.indexOf(name);\n\n    if (isFavorite >= 0) {\n      updated.splice(isFavorite, 1);\n    } else {\n      updated.push(name);\n    }\n\n    setFavorites(updated);\n    window.localStorage.setItem(localStorageKey, JSON.stringify(updated));\n  };\n\n  var onSearch = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(pokemon) {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (pokemon) {\n                _context3.next = 2;\n                break;\n              }\n\n              return _context3.abrupt(\"return\", fetchPokemons());\n\n            case 2:\n              setLoading(true);\n              setNotFound(false);\n              setSearching(true);\n              _context3.next = 7;\n              return searchPokemon(pokemon);\n\n            case 7:\n              result = _context3.sent;\n\n              if (result) {\n                _context3.next = 14;\n                break;\n              }\n\n              setNotFound(true);\n              setLoading(false);\n              return _context3.abrupt(\"return\");\n\n            case 14:\n              setPokemons([result]);\n              setPage(0);\n              setTotal(1);\n\n            case 17:\n              setLoading(false);\n              setSearching(false);\n\n            case 19:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function onSearch(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(FavoriteProvider, {\n    value: {\n      favoritePokemons: favorites,\n      updateFavoritePokemons: updateFavoritePokemons\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Searchbar, {\n    onSearch: onSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  }), notFound ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"not-found-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, \"No se encontro el Pokemon que buscabas \\uD83D\\uDE2D\") : /*#__PURE__*/React.createElement(Pokedex, {\n    loading: loading,\n    pokemons: pokemons,\n    page: page,\n    setPage: setPage,\n    total: total,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  })));\n}","map":{"version":3,"sources":["C:/Users/TANIA/Desktop/Agromprenx para iniciar poked/src/App.js"],"names":["React","Navbar","Searchbar","Pokedex","FavoriteProvider","Footer","getPokemonData","getPokemons","searchPokemon","useState","useEffect","localStorageKey","App","pokemons","setPokemons","page","setPage","total","setTotal","loading","setLoading","favorites","setFavorites","notFound","setNotFound","searching","setSearching","fetchPokemons","data","promises","results","map","pokemon","url","Promise","all","Math","ceil","count","loadFavoritePokemons","JSON","parse","window","localStorage","getItem","updateFavoritePokemons","name","updated","isFavorite","indexOf","splice","push","setItem","stringify","onSearch","result","favoritePokemons"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport \"./styles.css\";\r\nimport Navbar from \"../components/Navbar\";\r\nimport Searchbar from \"../components/Searchbar\";\r\nimport Pokedex from \"../components/Pokedex\";\r\nimport { FavoriteProvider } from \"../contexts/favoritesContext\";\r\nimport Footer from \"../components/Footer\";\r\nimport{getPokemonData, getPokemons,searchPokemon}from \"../api\"\r\nconst { useState, useEffect } = React;\r\n\r\nconst localStorageKey = \"favorite_pokemon\";\r\n\r\nexport default function App() {\r\n  const [pokemons, setPokemons] = useState([]);\r\n  const [page, setPage] = useState(0);\r\n  const [total, setTotal] = useState(0);\r\n  const [loading, setLoading] = useState(true);\r\n  const [favorites, setFavorites] = useState([]);\r\n  const [notFound, setNotFound] = useState(false);\r\n  const [searching, setSearching] = useState(false);\r\n\r\n  const fetchPokemons = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const data = await getPokemons(25, 25 * page);\r\n      const promises = data.results.map(async (pokemon) => {\r\n        return await getPokemonData(pokemon.url);\r\n      });\r\n      const results = await Promise.all(promises);\r\n      setPokemons(results);\r\n      setLoading(false);\r\n      setTotal(Math.ceil(data.count / 25));\r\n      setNotFound(false);\r\n    } catch (err) {}\r\n  };\r\n\r\n  const loadFavoritePokemons = () => {\r\n    const pokemons =\r\n      JSON.parse(window.localStorage.getItem(localStorageKey)) || [];\r\n    setFavorites(pokemons);\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadFavoritePokemons();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!searching) {\r\n      fetchPokemons();\r\n    }\r\n  }, [page]);\r\n\r\n  const updateFavoritePokemons = (name) => {\r\n    const updated = [...favorites];\r\n    const isFavorite = updated.indexOf(name);\r\n    if (isFavorite >= 0) {\r\n      updated.splice(isFavorite, 1);\r\n    } else {\r\n      updated.push(name);\r\n    }\r\n    setFavorites(updated);\r\n    window.localStorage.setItem(localStorageKey, JSON.stringify(updated));\r\n  };\r\n\r\n  const onSearch = async (pokemon) => {\r\n    if (!pokemon) {\r\n      return fetchPokemons();\r\n    }\r\n    setLoading(true);\r\n    setNotFound(false);\r\n    setSearching(true);\r\n    const result = await searchPokemon(pokemon);\r\n    if (!result) {\r\n      setNotFound(true);\r\n      setLoading(false);\r\n      return;\r\n    } else {\r\n      setPokemons([result]);\r\n      setPage(0);\r\n      setTotal(1);\r\n    }\r\n    setLoading(false);\r\n    setSearching(false);\r\n  };\r\n      return (\r\n    <\r\n      FavoriteProvider\r\n      value={{\r\n        favoritePokemons: favorites,\r\n        updateFavoritePokemons: updateFavoritePokemons\r\n      }}\r\n    >\r\n      <div>\r\n        <Navbar />\r\n        <div className=\"App\">\r\n          <Searchbar onSearch={onSearch} />\r\n          {notFound ? (\r\n            <div className=\"not-found-text\">\r\n              No se encontro el Pokemon que buscabas 😭\r\n            </div>\r\n          ) : (\r\n            <Pokedex\r\n              loading={loading}\r\n              pokemons={pokemons}\r\n              page={page}\r\n              setPage={setPage}\r\n              total={total}\r\n            />\r\n          )}\r\n        </div>\r\n        <Footer />\r\n      </div>\r\n    </FavoriteProvider>\r\n  );\r\n}\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}